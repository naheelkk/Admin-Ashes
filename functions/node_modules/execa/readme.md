_ecrd_hero .l_ecrd_webicons{margin-top:-18px;}.lite-entcard-ans-m .l_ecrd_tud svg path{fill:#B35601;}.lite-entcard-ans-m .lite-entcard-exp{padding:10px 10px 10px 10px;}.lite-entcard-ans-m .lite-entcard-main{font-size:14px;}.lite-entcard-blk{clear:both;position:relative;}.lite-entcard-blk > div:not(.l_ecrd_bkg_img){position:relative;z-index:auto;}.lite-entcard-blk:not(:first-child){width:100%;}.lite-entcard-blk:not(:last-child):not(.l_ecrd_bkg_bdrls),.lite-entcard-main > div:not(:last-child) > .lite-entcard-blk:not(.l_ecrd_bkg_bdrls){border-bottom:1px solid #DDD;}.lite-entcard-main{margin-bottom:0;}.lite-entcard-main .l_ecrd_ans_expand .btm_sml > div > div{margin:0;margin-top:-1px;}.lite-entcard-main a,.lite-entcard-main a:visited{color:#444;}.lite-entcard-main a:focus-visible .bsimg{outline-offset:-2px;outline-style:auto;}.lite-entcard-main p{-webkit-line-clamp:initial;display:inline;}.lite-entcard-maintop .l_ecrd_ftr{margin:0 20px 0 -20px;padding:12px 20px 4px 20px;}.lite-entcard-maintop .l_ecrd_ftr_txt a{text-decoration:none;}.lite-entcard-maintop.l_ecrd_ans_expand .lite-entcard-blk{border-top:1px solid #DDD;}.lite-entcard_8b953  .l_ecrd_chart_bar_thm{background:linear-gradient(to bottom, #E39807 0%, #B35601 100%);}.lite-entcard_8b953  .l_ecrd_tabtbl .tfil-active{background-color:#B35601 !important;border:1px solid #B35601 !important;}.lite-entcard_8b953 .l_ecrd_bkg_hlt{background-color:#FCF8F5;}.lite-entcard_8b953 .l_ecrd_bkg_txthlt{background-color:#B35601;}.lite-entcard_8b953 .l_ecrd_brdr_thm{border-color:#B35601;}.lite-entcard_8b953 .l_ecrd_chart_hbar_thm{background:linear-gradient(to left, #E39807 0%, #B35601 100%);}.lite-entcard_8b953 .l_ecrd_hov .l_ecrd_hov_qna .l_ecrd_hov_qna_site_txt, .lite-entcard_8b953 .l_ecrd_txt_hlt, .lite-entcard_8b953 .sp-tpwebicons.sp-symbolicon.SRCH {color:#B35601;}.lite-entcard_8b953 .l_ecrd_hov_thm:hover{background-color:#FCF8F5;}.lite-entcard_8b953 .l_ecrd_hov_thmtxt:hover{color:#B35601;}.lite-entcard_8b953 .l_ecrd_thm_fill{fill:#FCF8F5;}.lite-entcard_8b953 .l_ecrd_thmtxt, .lite-entcard_8b953 a.l_ecrd_thmtxt, .lite-entcard_8b953 a.l_ecrd_thmtxt:visited{color:#B35601;}.lite-entcard_8b953 .l_ecrd_tthm_fill{fill:#B35601;}.lite-entcard_8b953 .sp-ofsite, .lite-entcard_8b953 .l_ecrd_product .spl_stf, .lite-entcard_8b953 .spl_trnsths, .lite-entcard_8b953 .lc_expfact_plus, .lite-entcard_8b953 .b_slidesContainer .seeAll_chev circle, .lite-entcard_8b953 .sp-symbolicon .gray50_fill{fill:#B35601;}.lite-entcard_8b953 .spl_trnsths a, .lite-entcard_8b953 .spl_trnsths a:visited{color:#B35601;}.lite_acf .l_ecrd_simgset_m{container:simgset / inline-size;}.lite_acf .l_ecrd_simgset_m .cico{border-radius:4px;flex-shrink:0;}.lite_acf .l_ecrd_simgset_m .cico > img{height:100%;object-fit:cover;width:100%;}.lite_acf .l_ecrd_simgset_m .l_ecrd_imgsetgrid_ttl a{width:100%;}.lite_acf .l_ecrd_simgset_m .l_ecrd_mttl{margin-block-end:0;width:100%;}.lite_acf .l_ecrd_simgset_m .l_ecrd_mttl > div:last-of-type{margin:auto 0;}.lite_acf .l_ecrd_simgset_m .l_ecrd_rq_btxt{font-size:14px;font-weight:700;line-height:20px;}.lite_acf .l_ecrd_simgset_m .l_ecrd_rq_btxt, .lite_acf .l_ecrd_simgset_m .l_ecrd_rq_stxt{-webkit-box-orient:vertical;-webkit-line-clamp:1;align-self:stretch;display:-webkit-box;overflow:hidden;text-overflow:ellipsis;word-break:break-all;}.lite_acf .l_ecrd_simgset_m .l_ecrd_rq_stxt{font-size:12px;font-weight:400;line-height:16px;}.lite_acf .l_ecrd_simgset_m .l_ecrd_txt_gl{color:#111;font-weight:700;text-transform:none;}.lite_acf.lite-entcard_8b953 .l_ecrd_hov_thm:hover{background-color:#FCF8F5;}.spl-car-tmln-container:hover .spl-car-tmln-dot{background:#B35601;}a.ent-dtab-btn.ent-dtab-btn-hipo.def-override.ent-dtab-tabuxv1{background-color:var(--AC_ThemeBack2, #FCF8F5);border-color:var(--AC_ThemeFore1, #B35601);color:var(--AC_ThemeFore1, #B35601);fill:var(--AC_ThemeFore1, #B35601);}a.l_ecrd_a1_seemorelink:link{color:#001BA0;}a.l_ecrd_a1_seemorelink:visited{color:#551A8B;}a.l_ecrd_txt_lnk{text-decoration:none;}a.l_ecrd_txt_lnk:hover *:not(.l_ecrd_txt_nound):not(p){text-decoration:underline;}a:focus > .l_ecrd_hero_smi{border:1px solid #fff;}a:hover .l_ecrd_hero_smi > div{text-decoration:underline;}html[dir='ltr'] .l_ecrd_webicon_module_wrapper, .l_ecrd_webicons_with_title_Single{padding-right:12px;}html[dir='ltr'] .l_ecrd_webicons_with_title > div:last-of-type{padding-right:0;}html[dir='rtl'] .l_ecrd_mttl svg{transform:scaleX(-1);}html[dir='rtl'] .l_ecrd_tud{float:right;}html[dir='rtl'] .l_ecrd_webicon_module_wrapper{padding-left:12px;}html[dir='rtl'] .l_ecrd_webicons_with_title, .l_ecrd_webicons_with_title_Single{padding-right:20px;}.l_ecrd_webicon_module_item_title{display:block;font:11px/15px 'Roboto',Helvetica,Sans-Serif;padding-top:4px;text-align:center;}@container simgset (width < 279px){.lite_acf .l_ecrd_simgset_m .cico{height:32px;width:32px;}.lite_acf .l_ecrd_simgset_m .l_ecrd_rq_btxt{line-height:18px;}.lite_acf .l_ecrd_simgset_m .l_ecrd_simgset_item_data{flex:1;margin-inline-start:8px;}.lite_acf .l_ecrd_simgset_m > ul{display:grid;grid-row-gap:12px;}.lite_acf .l_ecrd_simgset_m a{display:flex;}}@container simgset (width < 384px){.lite_acf .l_ecrd_simgset_m > ul li:nth-child(n+4){display:none;}}@container simgset (width >= 279px){.lite_acf .l_ecrd_simgset_m .cico{height:80px;width:80px;}.lite_acf .l_ecrd_simgset_m .l_ecrd_rq_btxt{-webkit-line-clamp:2;word-break:normal;}.lite_acf .l_ecrd_simgset_m .l_ecrd_simgset_item_data{margin-block-start:8px;}.lite_acf .l_ecrd_simgset_m > ul li{width:80px;}.lite_acf .l_ecrd_simgset_m > ul{display:flex;gap:12px;}}@media (prefers-color-scheme: dark){#bpage.b_med .l_ecrd_bkg_hlt{background-color:#3B3A39;}#bpage.b_med .l_ecrd_mpl_tab .tab-head li.tab-active{box-shadow:inset 0 -3px 0 0 #F4DAB0;}#bpage.b_med .l_ecrd_mpl_tab .tab-head li:not(.tab-active):hover{box-shadow:inset 0 -3px 0 0 #F4DAB0;}#bpage.b_med .lite-entcard-blk > .l_ecrd_bkg_img, #bpage.b_med .l_ecrd_qfcts_fct .l_ecrd_bkg_img:not(:only-child){display:none;}#bpage.b_med .lite-entcard-blk.l_ecrd_bkg_hlt{background-color:unset;}#bpage.b_med .b_wptmWrapper #b_wptmTabBar .b_tbButton.b_tbSelected{background-color:#F4DAB0;}#bpage.b_med .l_ecrd_bkg_hlt .sp-symbolicon .gray50_fill, #bpage.b_med .sp-symbolicon .gray50_fill, #bpage.b_med .l_ecrd_product .spl_stf, #bpage.b_med .lc_expfact_plus, #bpage.b_med .sp-ofsite,#bpage.b_med .l_ecrd_tthm_fill{fill:#F4DAB0;}#bpage.b_med .l_ecrd_brdr_thm, #bpage.b_med .l_ecrd_brdr_thm div{border-color:#F4DAB0;}#bpage.b_med .l_ecrd_ftr_txt{color:#D2D0CE;}#bpage.b_med .l_ecrd_headergrad,#bpage.b_med .l_ecrd_header_bkg,#bpage.b_med div.l_ecrd_thumbheader,#bpage.b_med div.l_ecrd_largethumbheader path{background:#292827;}#bpage.b_med .l_ecrd_kt a, #bpage.b_med .l_ecrd_txt_badge{background-color:#3B3A39;}#bpage.b_med .l_ecrd_mpl_tab .l_ecrd_mpl_tbst, #bpage.b_med .l_ecrd_mpl_tab .tab-head li.tab-active, #bpage.b_med .l_ecrd_mpl_tab .tab-head li:not(.tab-active):hover{color:#F4DAB0;}#bpage.b_med .l_ecrd_mpl_tab{background-color:var(--canvasbkf7);}#bpage.b_med .l_ecrd_mttl svg path{fill:#EDEBE9;}#bpage.b_med .l_ecrd_thm_fill,#bpage.b_med .l_ecrd_quote path{fill:#3B3A39;}#bpage.b_med .l_ecrd_tmln_itm:hover .l_ecrd_brdr_thm.l_ecrd_tmln_bullet, #bpage.b_med .spl-car-tmln-container:hover .spl-car-tmln-dot{background:#F4DAB0;}#bpage.b_med .l_ecrd_txt_gl,#bpage.b_med .l_ecrd_txt_qfttl{color:#EDEBE9;}#bpage.b_med .l_ecrd_txt_hlt, #bpage.b_med div.l_ecrd_vqfcts_row a.l_ecrd_vqfcts_ttl, #bpage.b_med div.l_ecrd_vqfcts_row a.lc_expfact_title, #bpage.b_med .l_ecrd_vqfcts_lnk, #bpage.b_med lite-entcard_8b953 .l_ecrd_txt_thm,#bpage.b_med lite-entcard_8b953 .l_ecrd_txt_thm a,#bpage.b_med lite-entcard_8b953 .l_ecrd_txt_thm a:visited,#bpage.b_med .l_ecrd_txt_ellipses_plus, #bpage.b_med .l_ecrd_thmtxt, #bpage.b_med .spl_ugcpoll_ttl{color:#F4DAB0;}#bpage.b_med .lite-entcard-blk:not(:last-child):not(.l_ecrd_bkg_bdrls), #bpage.b_med .lite-entcard-main > div:not(:last-child) > .lite-entcard-blk:not(.l_ecrd_bkg_bdrls){border-color:#3B3A39;}#bpage.b_med .lite-entcard-main, #bpage.b_med .lite-entcard-main a, #bpage.b_med .lite-entcard-main a:visited,#bpage.b_med .lite-entcard-exp-itemdata{color:#EDEBE9;}#bpage.b_med a.l_ecrd_a1_execa()`](#execafile-arguments-options) or [`execa.command()`](#execacommandcommand-options).

#### exitCode

Type: `number`

The numeric exit code of the process that was run.

#### stdout

Type: `string | Buffer`

The output of the process on stdout.

#### stderr

Type: `string | Buffer`

The output of the process on stderr.

#### all

Type: `string | Buffer | undefined`

The output of the process with `stdout` and `stderr` interleaved.

This is `undefined` if either:
  - the [`all` option](#all-2) is `false` (the default value)
  - `execa.sync()` was used

#### failed

Type: `boolean`

Whether the process failed to run.

#### timedOut

Type: `boolean`

Whether the process timed out.

#### isCanceled

Type: `boolean`

Whether the process was canceled.

#### killed

Type: `boolean`

Whether the process was killed.

#### signal

Type: `string | undefined`

The name of the signal that was used to terminate the process. For example, `SIGFPE`.

If a signal terminated the process, this property is defined and included in the error message. Otherwise it is `undefined`.

#### signalDescription

Type: `string | undefined`

A human-friendly description of the signal that was used to terminate the process. For example, `Floating point arithmetic error`.

If a signal terminated the process, this property is defined and included in the error message. Otherwise it is `undefined`. It is also `undefined` when the signal is very uncommon which should seldomly happen.

#### message

Type: `string`

Error message when the child process failed to run. In addition to the [underlying error message](#originalMessage), it also contains some information related to why the child process errored.

The child process [stderr](#stderr) then [stdout](#stdout) are appended to the end, separated with newlines and not interleaved.

#### shortMessage

Type: `string`

This is the same as the [`message` property](#message) except it does not include the child process stdout/stderr.

#### originalMessage

Type: `string | undefined`

Original error message. This is the same as the `message` property except it includes neither the child process stdout/stderr nor some additional information added by Execa.

This is `undefined` unless the child process exited due to an `error` event or a timeout.

### options

Type: `object`

#### cleanup

Type: `boolean`\
Default: `true`

Kill the spawned process when the parent process exits unless either:
	- the spawned process is [`detached`](https://nodejs.org/api/child_process.html#child_process_options_detached)
	- the parent process is terminated abruptly, for example, with `SIGKILL` as opposed to `SIGTERM` or a normal exit

#### preferLocal

Type: `boolean`\
Default: `false`

Prefer locally installed binaries when looking for a binary to execute.\
If you `$ npm install foo`, you can then `execa('foo')`.

#### localDir

Type: `string`\
Default: `process.cwd()`

Preferred path to find locally installed binaries in (use with `preferLocal`).

#### execPath

Type: `string`\
Default: `process.execPath` (Current Node.js executable)

Path to the Node.js executable to use in child processes.

This can be either an absolute path or a path relative to the [`cwd` option](#cwd).

Requires [`preferLocal`](#preferlocal) to be `true`.

For example, this can be used together with [`get-node`](https://github.com/ehmicky/get-node) to run a specific Node.js version in a child process.

#### buffer

Type: `boolean`\
Default: `true`

Buffer the output from the spawned process. When set to `false`, you must read the output of [`stdout`](#stdout-1) and [`stderr`](#stderr-1) (or [`all`](#all) if the [`all`](#all-2) option is `true`). Otherwise the returned promise will not be resolved/rejected.

If the spawned process fails, [`error.stdout`](#stdout), [`error.stderr`](#stderr), and [`error.all`](#all) will contain the buffered data.

#### input

Type: `string | Buffer | stream.Readable`

Write some input to the `stdin` of your binary.\
Streams are not allowed when using the synchronous methods.

#### stdin

Type: `string | number | Stream | undefined`\
Default: `pipe`

Same options as [`stdio`](https://nodejs.org/dist/latest-v6.x/docs/api/child_process.html#child_process_options_stdio).

#### stdout

Type: `string | number | Stream | undefined`\
Default: `pipe`

Same options as [`stdio`](https://nodejs.org/dist/latest-v6.x/docs/api/child_process.html#child_process_options_stdio).

#### stderr

Type: `string | number | Stream | undefined`\
Default: `pipe`

Same options as [`stdio`](https://nodejs.org/dist/latest-v6.x/docs/api/child_process.html#child_process_options_stdio).

#### all

Type: `boolean`\
Default: `false`

Add an `.all` property on the [promise](#all) and the [resolved value](#all-1). The property contains the output of the process with `stdout` and `stderr` interleaved.

#### reject

Type: `boolean`\
Default: `true`

Setting this to `false` resolves the promise with the error instead of rejecting it.

#### stripFinalNewline

Type: `boolean`\
Default: `true`

Strip the final [newline character](https://en.wikipedia.org/wiki/Newline) from the output.

#### extendEnv

Type: `boolean`\
Default: `true`

Set to `false` if you don't want to extend the environment variables when providing the `env` property.

---

Execa also accepts the below options which are the same as the options for [`child_process#spawn()`](https://nodejs.org/api/child_process.html#child_process_child_process_spawn_command_args_options)/[`child_process#exec()`](https://nodejs.org/api/child_process.html#child_process_child_process_exec_command_options_callback)

#### cwd

Type: `string`\
Default: `process.cwd()`

Current working directory of the child process.

#### env

Type: `object`\
Default: `process.env`

Environment key-value pairs. Extends automatically from `process.env`. Set [`extendEnv`](#extendenv) to `false` if you don't want this.

#### argv0

Type: `string`

Explicitly set the value of `argv[0]` sent to the child process. This will be set to `file` if not specified.

#### stdio

Type: `string | string[]`\
Default: `pipe`

Child's [stdio](https://nodejs.org/api/child_process.html#child_process_options_stdio) configuration.

#### serialization

Type: `string`\
Default: `'json'`

Specify the kind of serialization used for sending messages between processes when using the [`stdio: 'ipc'`](#stdio) option or [`execa.node()`](#execanodescriptpath-arguments-options):
	- `json`: Uses `JSON.stringify()` and `JSON.parse()`.
	- `advanced`: Uses [`v8.serialize()`](https://nodejs.org/api/v8.html#v8_v8_serialize_value)

Requires Node.js `13.2.0` or later.

[More info.](https://nodejs.org/api/child_process.html#child_process_advanced_serialization)

#### detached

Type: `boolean`

Prepare child to run independently of its parent process. Specific behavior [depends on the platform](https://nodejs.org/api/child_process.html#child_process_options_detached).

#### uid

Type: `number`

Sets the user identity of the process.

#### gid

Type: `number`

Sets the group identity of the process.

#### shell

Type: `boolean | string`\
Default: `false`

If `true`, runs `file` inside of a shell. Uses `/bin/sh` on UNIX and `cmd.exe` on Windows. A different shell can be specified as a string. The shell should understand the `-c` switch on UNIX or `/d /s /c` on Windows.

We recommend against using this option since it is:
- not cross-platform, encouraging shell-specific syntax.
- slower, because of the additional shell interpretation.
- unsafe, potentially allowing command injection.

#### encoding

Type: `string | null`\
Default: `utf8`

Specify the character encoding used to decode the `stdout` and `stderr` output. If set to `null`, then `stdout` and `stderr` will be a `Buffer` instead of a string.

#### timeout

Type: `number`\
Default: `0`

If timeout is greater than `0`, the parent will send the signal identified by the `killSignal` property (the default is `SIGTERM`) if the child runs longer than timeout milliseconds.

#### maxBuffer

Type: `number`\
Default: `100_000_000` (100 MB)

Largest amount of data in bytes allowed on `stdout` or `stderr`.

#### killSignal

Type: `string | number`\
Default: `SIGTERM`

Signal value to be used when the spawned process will be killed.

#### windowsVerbatimArguments

Type: `boolean`\
Default: `false`

If `true`, no quoting or escaping of arguments is done on Windows. Ignored on other platforms. This is set to `true` automatically when the `shell` option is `true`.

#### windowsHide

Type: `boolean`\
Default: `true`

On Windows, do not create a new console window. Please note this also prevents `CTRL-C` [from working](https://github.com/nodejs/node/issues/29837) on Windows.

#### nodePath *(For `.node()` only)*

Type: `string`\
Default: [`process.execPath`](https://nodejs.org/api/process.html#process_process_execpath)

Node.js executable used to create the child process.

#### nodeOptions *(For `.node()` only)*

Type: `string[]`\
Default: [`process.execArgv`](https://nodejs.org/api/process.html#process_process_execargv)

List of [CLI options](https://nodejs.org/api/cli.html#cli_options) passed to the Node.js executable.

## Tips

### Retry on error

Gracefully handle failures by using automatic retries and exponential backoff with the [`p-retry`](https://github.com/sindresorhus/p-retry) package:

```js
const pRetry = require('p-retry');

const run = async () => {
	const results = await execa('curl', ['-sSL', 'https://sindresorhus.com/unicorn']);
	return results;
};

(async () => {
	console.log(await pRetry(run, {retries: 5}));
})();
```

### Save and pipe output from a child process

Let's say you want to show the output of a child process in real-time while also saving it to a variable.

```js
const execa = require('execa');

const subprocess = execa('echo', ['foo']);
subprocess.stdout.pipe(process.stdout);

(async () => {
	const {stdout} = await subprocess;
	console.log('child output:', stdout);
})();
```

### Redirect output to a file

```js
const execa = require('execa');

const subprocess = execa('echo', ['foo'])
subprocess.stdout.pipe(fs.createWriteStream('stdout.txt'))
```

### Redirect input from a file

```js
const execa = require('execa');

const subprocess = execa('cat')
fs.createReadStream('stdin.txt').pipe(subprocess.stdin)
```

### Execute the current package's binary

```js
const {getBinPathSync} = require('get-bin-path');

const binPath = getBinPathSync();
const subprocess = execa(binPath);
```

`execa` can be combined with [`get-bin-path`](https://github.com/ehmicky/get-bin-path) to test the current package's binary. As opposed to hard-coding the path to the binary, this validates that the `package.json` `bin` field is correctly set up.

## Related

- [gulp-execa](https://github.com/ehmicky/gulp-execa) - Gulp plugin for `execa`
- [nvexeca](https://github.com/ehmicky/nvexeca) - Run `execa` using any Node.js version
- [sudo-prompt](https://github.com/jorangreef/sudo-prompt) - Run commands with elevated privileges.

## Maintainers

- [Sindre Sorhus](https://github.com/sindresorhus)
- [@ehmicky](https://github.com/ehmicky)

---

<div align="center">
	<b>
		<a href="https://tidelift.com/subscription/pkg/npm-execa?utm_source=npm-execa&utm_medium=referral&utm_campaign=readme">Get professional support for this package with a Tidelift subscription</a>
	</b>
	<br>
	<sub>
		Tidelift helps make open source sustainable for maintainers while giving companies<br>assurances about security, maintenance, and licensing for their dependencies.
	</sub>
</div>
