hContentFromCache();this.dsbBaseUrl="/DSB";this.dsbV2BaseUrl="/DSB/search";n.config.enableOfflineWithWeb&&n.config.webHost&&n.isBrowserOnline()&&(this.dsbBaseUrl=n.config.webHost+this.dsbBaseUrl,this.dsbV2BaseUrl=n.config.webHost+this.dsbV2BaseUrl);n.Host.bindDismissed(()=>{var t,i;this.renderOnDismissReason!=null&&(this.render(),this.renderOnDismissReason==1&&n.dsbManager.allowSuspension(),this.renderOnDismissReason=null);const r=document===null||document===void 0?void 0:document.activeElement;r&&r.blur();(t=_qs("#dynamic-pane .dsb-moment-content"))===null||t===void 0?void 0:t.classList.add("b_hide");n.shouldShowDSBFullWidth()&&((i=_qs("#dynamic-pane-full .dsbFullWidth"))===null||i===void 0?void 0:i.classList.add("b_hide"));n.Host.isTSInSearchBoxAvailable()&&n.placeholdertextNeedUpdate&&(this.updatePlaceholdertext(),n.placeholdertextNeedUpdate=!1)});n.Host.bindShown(()=>{var t,i;(t=_qs("#dynamic-pane .dsb-moment-content"))===null||t===void 0?void 0:t.classList.remove("b_hide");n.shouldShowDSBFullWidth()&&((i=_qs("#dynamic-pane-full .dsbFullWidth"))===null||i===void 0?void 0:i.classList.remove("b_hide"))});n.Host.bindAccountChanged(()=>{var t;if(this.shouldShowBingGleam()){const i=(t=n.Host.getConnectedAccountInfo(0))===null||t===void 0?void 0:t.accountId;if(i){const t=n.LightweightStorage.getItem(this.currentUserIDCacheKey);i!=t&&n.LightweightStorage.setItem(this.currentUserIDCacheKey,i)}}})}getName(){return"DynamicSearchViewModel"}isEnabled(){return!0}getUpdateIntervalMins(t){return n.Host.isTSInSearchBoxAvailable()?t?this.getDSBContentUpdateIntervalMins():n.UPDATE_PLACEHOLDERTEXT_INTERVAL_MINS:this.getDSBContentUpdateIntervalMins()}getDSBContentUpdateIntervalMins(){var t;return n.TestHookUrlParameters?(t=n.TestHookUrlParameters.dsbUpdateInterval)!==null&&t!==void 0?t:n.DEFAULT_DSB_UPDATE_INTERVAL_MINS:n.DEFAULT_DSB_UPDATE_INTERVAL_MINS}getDSBGleamExpiryInMins(){var t;return n.TestHookUrlParameters?(t=n.TestHookUrlParameters.dsbGleamExpiryMins)!==null&&t!==void 0?t:n.DEFAULT_DSB_GLEAM_EXPIRY_MINS:n.DEFAULT_DSB_GLEAM_EXPIRY_MINS}getDynamicSearchBoxContent(){return this.dynamicSearchBoxContent}getSearchAppearanceGleamContent(){return this.searchAppearanceGleamContent}resetActiveStatus(){const t=n.getCurrentDateDSB();this.activeMomentsIndexMap={};const i=n.getDateStringInDSBFormat(t);this.activeMomentDate=i;this.currentDateDSBStr=i;this.momentDatesFlipper=n.getDSBMomentDatesForFlipper(t);this.previousMomentDate=this.momentDatesFlipper[this.momentDatesFlipper.length-2];this.nextMomentDate=this.momentDatesFlipper[0]}loadDynamicSearchContentFromCache(){(n.TestHookUrlParameters===null||n.TestHookUrlParameters===void 0?void 0:n.TestHookUrlParameters.disableDSBCache)||(this.resetInstrumentation(2),n.config.enableDSBMergedRefactor&&this.loadDSBSearchFallbackStatus(),this.loadDismissedMomentsFromCache(),this.loadCurrentDayContentFromCache(),this.loadPastDaysContentFromCache(),n.config.enableDSBMergedRefactor||this.isDSBMergedCallSuccess<0&&n.isDSBFullWidthFlightEnabled()&&this.loadDSBV2ContentFromCache())}loadDSBV2ContentFromCache(){const t=n.LightweightStorage.getItem(this.DSBV2DataModelStorageKey);if(t&&n.isDSBFullWidthFlightEnabled()){this.DSBV2ContentCache=JSON.parse(t);const{cacheTime:i,response:r}=this.DSBV2ContentCache,u=i+this.getDSBGleamExpiryInMins()*n.MINS_TO_MILLIS;n.getCurrentTime()<u&&(this.DSBMiniserpDataModel=this.parseMultiMomentsResponse(r,3,undefined,n.msbDsbHost===null||n.msbDsbHost===void 0?void 0:n.msbDsbHost.isInBlendedMode()),this.DSBMiniserpDataModel||this.instrumentDSBFallback(13,3,null,t))}}loadCurrentDayContentFromCache(){var t,i,r;const u=n.LightweightStorage.getItem(this.DataModelStorageKey);if(u){this.multiMomentsContentCache=JSON.parse(u);const{cacheTime:e,response:c}=this.multiMomentsContentCache;this.gleamDataCacheTime=e;const l=e+this.getDSBGleamExpiryInMins()*n.MINS_TO_MILLIS;if(n.getCurrentTime()<l){let t=n.isDSBV2EnabledMarket()&&this.DSBSearchCallStatus!=="FallbacktoV2"?5:1;this.multiMomentsDataModel=this.parseMultiMomentsResponse(c,t,!0,n.msbDsbHost===null||n.msbDsbHost===void 0?void 0:n.msbDsbHost.isInBlendedMode());this.mult